<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto</title>
    <link rel="stylesheet" href="detalhes.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="logo.png" alt="Logo SeaBreeze" class="logo-img">
        </div>
        <input type="text" placeholder="Buscar produtos...">
        <button class="search-btn">Buscar</button>
        <div class="cart">
            <a href="#" id="cart-link">Carrinho Vazio</a>
        </div>
    </header>

    <main>
        <div class="produto-detalhes">
            <img id="produto-imagem" alt="Imagem do Produto">
            <div class="produto-info">
                <h2 id="produto-nome"></h2>
                <p id="produto-preco"></p>
                <p><strong>Tamanho disponível:</strong> P, M, G</p>
                <p><strong>Avaliação:</strong> ★★★★☆</p>

                <!-- Botão Adicionar ao Carrinho -->
                <button id="add-to-cart" onclick="adicionarAoCarrinho()">Adicionar ao Carrinho</button>

                <div class="comentarios">
                    <h3>Comentários:</h3>
                    <div id="comentarios-container"></div>
                    <textarea id="comentario-texto" placeholder="Adicionar um comentário"></textarea>
                    <button onclick="adicionarComentario()">Enviar</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const nome = getQueryParam('nome');
            const valor = getQueryParam('valor');
            const imagem = getQueryParam('imagem');

            document.getElementById('produto-nome').textContent = nome;
            document.getElementById('produto-preco').textContent = `R$ ${parseFloat(valor).toFixed(2)}`;
            document.getElementById('produto-imagem').src = imagem;
        });

        function adicionarAoCarrinho() {
            const nome = document.getElementById('produto-nome').textContent;
            const valor = parseFloat(document.getElementById('produto-preco').textContent.replace('R$ ', '').replace(',', '.'));
            const imagem = document.getElementById('produto-imagem').src;

            // Chama a função que adiciona ao carrinho no popup
            window.opener.adicionarAoCarrinho(nome, valor, imagem); // Adiciona no carrinho da loja principal
            alert(`${nome} foi adicionado ao carrinho!`); // Mensagem de confirmação
        }
    </script>
</body>
</html>
